[
  {
    "Name": "Typical EPUB 3 book",
    "Options": null,
    "ContentFiles": [
      {
        "$id": 1,
        "$type": "EpubLocalTextContentFile",
        "$content": "epub://Content/front.html",
        "FilePath": "Content/front.html",
        "Key": "front.html",
        "ContentType": "XHTML_1_1",
        "ContentMimeType": "application/xhtml+xml"
      },
      {
        "$id": 2,
        "$type": "EpubLocalTextContentFile",
        "$content": "epub://Content/cover.html",
        "FilePath": "Content/cover.html",
        "Key": "cover.html",
        "ContentType": "XHTML_1_1",
        "ContentMimeType": "application/xhtml+xml"
      },
      {
        "$id": 3,
        "$type": "EpubLocalTextContentFile",
        "$content": "epub://Content/chapter1.html",
        "FilePath": "Content/chapter1.html",
        "Key": "chapter1.html",
        "ContentType": "XHTML_1_1",
        "ContentMimeType": "application/xhtml+xml"
      },
      {
        "$id": 4,
        "$type": "EpubLocalTextContentFile",
        "$content": "epub://Content/chapter2.html",
        "FilePath": "Content/chapter2.html",
        "Key": "chapter2.html",
        "ContentType": "XHTML_1_1",
        "ContentMimeType": "application/xhtml+xml"
      },
      {
        "$id": 5,
        "$type": "EpubLocalTextContentFile",
        "$content": "epub://Content/chapter3.html",
        "FilePath": "Content/chapter3.html",
        "Key": "chapter3.html",
        "ContentType": "XHTML_1_1",
        "ContentMimeType": "application/xhtml+xml"
      },
      {
        "$id": 6,
        "$type": "EpubLocalTextContentFile",
        "$content": "epub://Content/toc.html",
        "FilePath": "Content/toc.html",
        "Key": "toc.html",
        "ContentType": "XHTML_1_1",
        "ContentMimeType": "application/xhtml+xml"
      },
      {
        "$id": 7,
        "$type": "EpubLocalTextContentFile",
        "$content": "epub://Content/styles.css",
        "FilePath": "Content/styles.css",
        "Key": "styles.css",
        "ContentType": "CSS",
        "ContentMimeType": "text/css"
      },
      {
        "$id": 8,
        "$type": "EpubLocalByteContentFile",
        "$content": "epub://Content/cover.jpg",
        "FilePath": "Content/cover.jpg",
        "Key": "cover.jpg",
        "ContentType": "IMAGE_JPEG",
        "ContentMimeType": "image/jpeg"
      },
      {
        "$id": 9,
        "$type": "EpubLocalByteContentFile",
        "$content": "epub://Content/image.jpg",
        "FilePath": "Content/image.jpg",
        "Key": "image.jpg",
        "ContentType": "IMAGE_JPEG",
        "ContentMimeType": "image/jpeg"
      },
      {
        "$id": 10,
        "$type": "EpubLocalByteContentFile",
        "$content": "epub://Content/font.ttf",
        "FilePath": "Content/font.ttf",
        "Key": "font.ttf",
        "ContentType": "FONT_TRUETYPE",
        "ContentMimeType": "application/x-font-truetype"
      },
      {
        "$id": 11,
        "$type": "EpubLocalByteContentFile",
        "$content": "epub://Content/chapter1-audio.mp3",
        "FilePath": "Content/chapter1-audio.mp3",
        "Key": "chapter1-audio.mp3",
        "ContentType": "AUDIO_MP3",
        "ContentMimeType": "audio/mpeg"
      },
      {
        "$id": 12,
        "$type": "EpubLocalByteContentFile",
        "$content": "epub://Content/title.mp3",
        "FilePath": "Content/title.mp3",
        "Key": "title.mp3",
        "ContentType": "AUDIO_MP3",
        "ContentMimeType": "audio/mpeg"
      },
      {
        "$id": 13,
        "$type": "EpubLocalTextContentFile",
        "$content": "epub://Content/chapter1.smil",
        "FilePath": "Content/chapter1.smil",
        "Key": "chapter1.smil",
        "ContentType": "SMIL",
        "ContentMimeType": "application/smil+xml"
      },
      {
        "$id": 14,
        "$type": "EpubLocalByteContentFile",
        "$content": "epub://Content/chapter2.xml",
        "FilePath": "Content/chapter2.xml",
        "Key": "chapter2.xml",
        "ContentType": "OTHER",
        "ContentMimeType": "text/example+xml"
      },
      {
        "$id": 15,
        "$type": "EpubLocalByteContentFile",
        "$content": "epub://Content/chapter3.xml",
        "FilePath": "Content/chapter3.xml",
        "Key": "chapter3.xml",
        "ContentType": "OTHER",
        "ContentMimeType": "application/z3998-auth+xml"
      },
      {
        "$id": 16,
        "$type": "EpubLocalByteContentFile",
        "$content": "epub://Content/book.atom",
        "FilePath": "Content/book.atom",
        "Key": "book.atom",
        "ContentType": "OTHER",
        "ContentMimeType": "application/atom+xml"
      },
      {
        "$id": 17,
        "$type": "EpubLocalTextContentFile",
        "$content": "epub://Content/toc.ncx",
        "FilePath": "Content/toc.ncx",
        "Key": "toc.ncx",
        "ContentType": "DTBOOK_NCX",
        "ContentMimeType": "application/x-dtbncx+xml"
      }
    ],
    "ExpectedResult": {
      "$file": "test.epub",
      "Title": "Test title 1",
      "Author": "John Doe, Jane Doe",
      "AuthorList": [
        "John Doe",
        "Jane Doe"
      ],
      "Description": "Test description",
      "$cover": "epub://Content/cover.jpg",
      "ReadingOrder": [
        {
          "$ref": 1
        },
        {
          "$ref": 6
        },
        {
          "$ref": 3
        },
        {
          "$ref": 4
        },
        {
          "$ref": 5
        }
      ],
      "Navigation": [
        {
          "Type": "HEADER",
          "Title": "Table of Contents",
          "NestedItems": [
            {
              "Type": "HEADER",
              "Title": "Test span header 1",
              "NestedItems": [
                {
                  "Type": "LINK",
                  "Title": "Chapter 1",
                  "Link": {
                    "ContentFileUrl": "chapter1.html",
                    "ContentFilePath": "Content/chapter1.html",
                    "Anchor": null
                  },
                  "HtmlContentFile": {
                    "$ref": 3
                  }
                }
              ]
            },
            {
              "Type": "HEADER",
              "Title": "Test span header 2",
              "NestedItems": [
                {
                  "Type": "LINK",
                  "Title": "Chapter 2",
                  "Link": {
                    "ContentFileUrl": "chapter2.html",
                    "ContentFilePath": "Content/chapter2.html",
                    "Anchor": null
                  },
                  "HtmlContentFile": {
                    "$ref": 4
                  }
                },
                {
                  "Type": "LINK",
                  "Title": "Chapter 3",
                  "Link": {
                    "ContentFileUrl": "chapter3.html",
                    "ContentFilePath": "Content/chapter3.html",
                    "Anchor": null
                  },
                  "HtmlContentFile": {
                    "$ref": 5
                  }
                }
              ]
            }
          ]
        }
      ],
      "Schema": {
        "Package": {
          "EpubVersion": "EPUB_3",
          "Metadata": {
            "Titles": [
              {
                "Title": "Test title 1"
              },
              {
                "Title": "Test title 2"
              }
            ],
            "Creators": [
              {
                "Creator": "John Doe",
                "Id": "creator-1",
                "FileAs": "Doe, John",
                "Role": "author"
              },
              {
                "Creator": "Jane Doe",
                "Id": "creator-2",
                "FileAs": "Doe, Jane",
                "Role": "author"
              }
            ],
            "Subjects": [
              {
                "Subject": "Test subject 1"
              },
              {
                "Subject": "Test subject 2"
              }
            ],
            "Descriptions": [
              {
                "Description": "Test description"
              }
            ],
            "Publishers": [
              {
                "Publisher": "Test publisher 1"
              },
              {
                "Publisher": "Test publisher 2"
              }
            ],
            "Contributors": [
              {
                "Contributor": "John Editor",
                "Id": "contributor-1",
                "FileAs": "Editor, John",
                "Role": "editor"
              },
              {
                "Contributor": "Jane Editor",
                "Id": "contributor-2",
                "FileAs": "Editor, Jane",
                "Role": "editor"
              }
            ],
            "Dates": [
              {
                "Date": "2021-12-31T23:59:59.123456Z",
                "Event": "creation"
              },
              {
                "Date": "2022-01-23",
                "Event": "publication"
              }
            ],
            "Types": [
              {
                "Type": "dictionary"
              },
              {
                "Type": "preview"
              }
            ],
            "Formats": [
              {
                "Format": "format-1"
              },
              {
                "Format": "format-2"
              }
            ],
            "Identifiers": [
              {
                "Identifier": "https://example.com/books/123",
                "Id": "identifier-1",
                "Scheme": "URI"
              },
              {
                "Identifier": "9781234567890",
                "Id": "identifier-2",
                "Scheme": "ISBN"
              }
            ],
            "Sources": [
              {
                "Source": "https://example.com/books/123/content-1.html"
              },
              {
                "Source": "https://example.com/books/123/content-2.html"
              }
            ],
            "Languages": [
              {
                "Language": "en"
              },
              {
                "Language": "is"
              }
            ],
            "Relations": [
              {
                "Relation": "https://example.com/books/123/related-1.html"
              },
              {
                "Relation": "https://example.com/books/123/related-2.html"
              }
            ],
            "Coverages": [
              {
                "Coverage": "New York"
              },
              {
                "Coverage": "1700-1850"
              }
            ],
            "Rights": [
              {
                "Rights": "Public domain in the USA"
              },
              {
                "Rights": "All rights reserved"
              }
            ],
            "Links": [
              {
                "Href": "front.html#meta-json",
                "Id": "link-1",
                "MediaType": "application/xhtml+xml",
                "Relationships": [
                  "RECORD"
                ],
                "HrefLanguage": null
              },
              {
                "Href": "https://example.com/onix/123",
                "Id": "link-2",
                "MediaType": "application/xml",
                "Properties": [
                  "ONIX"
                ],
                "Relationships": [
                  "RECORD",
                  "ONIX_RECORD"
                ],
                "HrefLanguage": null
              },
              {
                "Href": "book.atom",
                "Id": "link-3",
                "MediaType": "application/atom+xml;type=entry;profile=opds-catalog",
                "Relationships": [
                  "RECORD"
                ],
                "HrefLanguage": null
              },
              {
                "Href": "title.mp3",
                "Id": "link-4",
                "MediaType": "audio/mpeg",
                "Refines": "#title",
                "Relationships": [
                  "VOICING"
                ],
                "HrefLanguage": null
              }
            ],
            "MetaItems": [
              {
                "Name": "cover",
                "Content": "cover-image"
              },
              {
                "Content": "landscape",
                "Id": "meta-1",
                "Property": "rendition:orientation"
              },
              {
                "Content": "123",
                "Id": "meta-2",
                "Refines": "#identifier-2",
                "Property": "identifier-type",
                "Scheme": "onix:codelist5"
              },
              {
                "Content": "Brynjólfur Sveinsson",
                "Id": "meta-3",
                "Refines": "#creator-1",
                "Property": "alternate-script"
              }
            ]
          },
          "Manifest": {
            "Items": [
              {
                "Id": "item-front",
                "Href": "front.html",
                "MediaType": "application/xhtml+xml"
              },
              {
                "Id": "cover",
                "Href": "cover.html",
                "MediaType": "application/xhtml+xml"
              },
              {
                "Id": "cover-image",
                "Href": "cover.jpg",
                "MediaType": "image/jpeg",
                "Properties": [
                  "COVER_IMAGE"
                ]
              },
              {
                "Id": "item-css",
                "Href": "styles.css",
                "MediaType": "text/css"
              },
              {
                "Id": "item-font",
                "Href": "font.ttf",
                "MediaType": "application/x-font-truetype"
              },
              {
                "Id": "item-1",
                "Href": "chapter1.html",
                "MediaType": "application/xhtml+xml",
                "MediaOverlay": "item-1-smil"
              },
              {
                "Id": "item-1-smil",
                "Href": "chapter1.smil",
                "MediaType": "application/smil+xml"
              },
              {
                "Id": "item-1-audio",
                "Href": "chapter1-audio.mp3",
                "MediaType": "audio/mpeg"
              },
              {
                "Id": "item-2",
                "Href": "chapter2.html",
                "MediaType": "application/xhtml+xml"
              },
              {
                "Id": "item-2-fall",
                "Href": "chapter2.xml",
                "MediaType": "text/example+xml",
                "RequiredNamespace": "http://example.com/ns/example/",
                "RequiredModules": "ruby, server-side-image-map",
                "Fallback": "item-2",
                "FallbackStyle": "item-css"
              },
              {
                "Id": "item-3",
                "Href": "chapter3.html",
                "MediaType": "application/xhtml+xml"
              },
              {
                "Id": "item-3-fall",
                "Href": "chapter3.xml",
                "MediaType": "application/z3998-auth+xml",
                "Fallback": "item-3"
              },
              {
                "Id": "item-image",
                "Href": "image.jpg",
                "MediaType": "image/jpeg"
              },
              {
                "Id": "item-title-audio",
                "Href": "title.mp3",
                "MediaType": "audio/mpeg"
              },
              {
                "Id": "item-atom",
                "Href": "book.atom",
                "MediaType": "application/atom+xml"
              },
              {
                "Id": "item-toc",
                "Href": "toc.html",
                "MediaType": "application/xhtml+xml",
                "Properties": [
                  "NAV"
                ]
              },
              {
                "Id": "ncx",
                "Href": "toc.ncx",
                "MediaType": "application/x-dtbncx+xml"
              }
            ]
          },
          "Spine": {
            "Id": "spine",
            "PageProgressionDirection": "LEFT_TO_RIGHT",
            "Toc": "ncx",
            "Items": [
              {
                "Id": "itemref-1",
                "IdRef": "item-front",
                "IsLinear": true,
                "Properties": null
              },
              {
                "Id": "itemref-2",
                "IdRef": "item-toc",
                "IsLinear": false,
                "Properties": null
              },
              {
                "Id": "itemref-3",
                "IdRef": "item-1",
                "IsLinear": true,
                "Properties": null
              },
              {
                "Id": "itemref-4",
                "IdRef": "item-2",
                "IsLinear": true,
                "Properties": [
                  "PAGE_SPREAD_LEFT"
                ]
              },
              {
                "Id": "itemref-5",
                "IdRef": "item-3",
                "IsLinear": true,
                "Properties": [
                  "PAGE_SPREAD_RIGHT"
                ]
              }
            ]
          },
          "Guide": {
            "Items": [
              {
                "Type": "toc",
                "Title": "Contents",
                "Href": "toc.html"
              }
            ]
          }
        },
        "Epub2Ncx": {
          "FilePath": "Content/toc.ncx",
          "Head": {
            "Items": [
              {
                "Name": "dtb:uid",
                "Content": "9781234567890"
              },
              {
                "Name": "dtb:depth",
                "Content": "1"
              },
              {
                "Name": "dtb:generator",
                "Content": "EpubWriter"
              },
              {
                "Name": "dtb:totalPageCount",
                "Content": "0"
              },
              {
                "Name": "dtb:maxPageNumber",
                "Content": "0"
              },
              {
                "Name": "location",
                "Content": "https://example.com/books/123/ncx",
                "Scheme": "URI"
              }
            ]
          },
          "DocTitle": "Test title 1",
          "DocAuthors": [
            "John Doe",
            "Jane Doe"
          ],
          "NavMap": {
            "Items": [
              {
                "Id": "navpoint-1",
                "Class": "chapter",
                "PlayOrder": "1",
                "NavigationLabels": [
                  {
                    "Text": "Chapter 1"
                  },
                  {
                    "Text": "Capitolo 1"
                  }
                ],
                "Content": {
                  "Id": "content-1",
                  "Source": "chapter1.html"
                },
                "ChildNavigationPoints": [
                  {
                    "Id": "navpoint-1-1",
                    "Class": "section",
                    "NavigationLabels": [
                      {
                        "Text": "Chapter 1.1"
                      }
                    ],
                    "Content": {
                      "Id": "content-1-1",
                      "Source": "chapter1.html#section-1"
                    }
                  },
                  {
                    "Id": "navpoint-1-2",
                    "Class": "section",
                    "NavigationLabels": [
                      {
                        "Text": "Chapter 1.2"
                      }
                    ],
                    "Content": {
                      "Id": "content-1-2",
                      "Source": "chapter1.html#section-2"
                    }
                  }
                ]
              },
              {
                "Id": "navpoint-2",
                "NavigationLabels": [
                  {
                    "Text": "Chapter 2"
                  }
                ],
                "Content": {
                  "Source": "chapter2.html"
                }
              },
              {
                "Id": "navpoint-3",
                "NavigationLabels": [
                  {
                    "Text": "Chapter 3"
                  }
                ],
                "Content": {
                  "Source": "chapter3.html"
                }
              }
            ]
          },
          "PageList": {
            "Items": [
              {
                "Id": "page-target-1",
                "Value": "1",
                "Type": "FRONT",
                "Class": "front-matter",
                "PlayOrder": "1",
                "NavigationLabels": [
                  {
                    "Text": "1"
                  },
                  {
                    "Text": "I"
                  }
                ],
                "Content": {
                  "Source": "front.html"
                }
              },
              {
                "Type": "NORMAL",
                "NavigationLabels": [
                  {
                    "Text": "2"
                  }
                ],
                "Content": {
                  "Id": "content-2",
                  "Source": "chapter1.html#page-2"
                }
              }
            ]
          },
          "NavLists": [
            {
              "Id": "navlist-1",
              "Class": "navlist-illustrations",
              "NavigationLabels": [
                {
                  "Text": "List of Illustrations"
                },
                {
                  "Text": "Illustrazioni"
                }
              ],
              "NavigationTargets": [
                {
                  "Id": "navtarget-1",
                  "Class": "illustration",
                  "Value": "Illustration 1",
                  "PlayOrder": "1",
                  "NavigationLabels": [
                    {
                      "Text": "Illustration 1"
                    },
                    {
                      "Text": "Illustrazione 1"
                    }
                  ],
                  "Content": {
                    "Source": "chapter1.html#illustration-1"
                  }
                }
              ]
            },
            {
              "Id": "navlist-2",
              "Class": "navlist-tables",
              "NavigationLabels": [
                {
                  "Text": "List of Tables"
                }
              ],
              "NavigationTargets": [
                {
                  "Id": "navtarget-2",
                  "NavigationLabels": [
                    {
                      "Text": "Tables"
                    }
                  ]
                },
                {
                  "Id": "navtarget-3",
                  "NavigationLabels": [
                    {
                      "Text": "Table 1"
                    }
                  ],
                  "Content": {
                    "Source": "chapter1.html#table-1"
                  }
                }
              ]
            }
          ]
        },
        "Epub3NavDocument": {
          "FilePath": "Content/toc.html",
          "Navs": [
            {
              "Type": "TOC",
              "Head": "Table of Contents",
              "Ol": {
                "Lis": [
                  {
                    "Span": {
                      "Text": "Test span header 1",
                      "Title": "Test span title 1",
                      "Alt": "Test span alt 1"
                    },
                    "ChildOl": {
                      "Lis": [
                        {
                          "Anchor": {
                            "Href": "chapter1.html",
                            "Text": "Chapter 1",
                            "Title": "Test anchor title 1",
                            "Alt": "Test anchor alt 1"
                          }
                        }
                      ]
                    }
                  },
                  {
                    "Span": {
                      "Text": "Test span header 2",
                      "Title": "Test span title 2",
                      "Alt": "Test span alt 2"
                    },
                    "ChildOl": {
                      "Lis": [
                        {
                          "Anchor": {
                            "Href": "chapter2.html",
                            "Text": "Chapter 2",
                            "Title": "Test anchor title 2",
                            "Alt": "Test anchor alt 2"
                          }
                        },
                        {
                          "Anchor": {
                            "Href": "chapter3.html",
                            "Text": "Chapter 3",
                            "Title": "Test anchor title 3",
                            "Alt": "Test anchor alt 3"
                          }
                        }
                      ]
                    }
                  }
                ]
              }
            },
            {
              "Type": "PAGE_LIST",
              "IsHidden": true,
              "Head": "Page list",
              "Ol": {
                "IsHidden": true,
                "Lis": [
                  {
                    "Anchor": {
                      "Href": "chapter1.html#page-1",
                      "Text": "1"
                    }
                  }
                ]
              }
            }
          ]
        },
        "MediaOverlays": [
          {
            "Id": null,
            "Version": "SMIL_3",
            "EpubPrefix": null,
            "Head": null,
            "Body": {
              "Id": null,
              "EpubTypes": null,
              "EpubTextRef": null,
              "Seqs": [],
              "Pars": [
                {
                  "Id": "par1",
                  "EpubTypes": null,
                  "Text": {
                    "Id": null,
                    "Src": "chapter1.html#sentence1"
                  },
                  "Audio": {
                    "Id": null,
                    "Src": "chapter1_audio.mp3",
                    "ClipBegin": "0s",
                    "ClipEnd": "10s"
                  }
                },
                {
                  "Id": "par2",
                  "EpubTypes": null,
                  "Text": {
                    "Id": null,
                    "Src": "chapter1.html#sentence2"
                  },
                  "Audio": {
                    "Id": null,
                    "Src": "chapter1_audio.mp3",
                    "ClipBegin": "10s",
                    "ClipEnd": "20s"
                  }
                },
                {
                  "Id": "par3",
                  "EpubTypes": null,
                  "Text": {
                    "Id": null,
                    "Src": "chapter1.html#sentence3"
                  },
                  "Audio": {
                    "Id": null,
                    "Src": "chapter1_audio.mp3",
                    "ClipBegin": "20s",
                    "ClipEnd": "30s"
                  }
                }
              ]
            }
          }
        ],
        "ContentDirectoryPath": "Content"
      },
      "Content": {
        "Cover": {
          "$ref": 8
        },
        "NavigationHtmlFile": {
          "$ref": 6
        },
        "Html": {
          "Local": [
            {
              "$ref": 1
            },
            {
              "$ref": 2
            },
            {
              "$ref": 3
            },
            {
              "$ref": 4
            },
            {
              "$ref": 5
            },
            {
              "$ref": 6
            }
          ]
        },
        "Css": {
          "Local": [
            {
              "$ref": 7
            }
          ]
        },
        "Images": {
          "Local": [
            {
              "$ref": 8
            },
            {
              "$ref": 9
            }
          ]
        },
        "Fonts": {
          "Local": [
            {
              "$ref": 10
            }
          ]
        },
        "Audio": {
          "Local": [
            {
              "$ref": 11
            },
            {
              "$ref": 12
            }
          ]
        },
        "AllFiles": {
          "Local": [
            {
              "$ref": 1
            },
            {
              "$ref": 2
            },
            {
              "$ref": 3
            },
            {
              "$ref": 4
            },
            {
              "$ref": 5
            },
            {
              "$ref": 6
            },
            {
              "$ref": 7
            },
            {
              "$ref": 8
            },
            {
              "$ref": 9
            },
            {
              "$ref": 10
            },
            {
              "$ref": 11
            },
            {
              "$ref": 12
            },
            {
              "$ref": 13
            },
            {
              "$ref": 14
            },
            {
              "$ref": 15
            },
            {
              "$ref": 16
            },
            {
              "$ref": 17
            }
          ]
        }
      }
    }
  }
]